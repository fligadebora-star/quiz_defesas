<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz - Sistema Imunit√°rio e Suplementos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1f3a 0%, #0d1929 100%);
            min-height: 100vh;
            padding: 20px;
            color: #f1f5f9;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: slideDown 0.8s ease-out;
        }

        .premium-image {
            max-width: 100%;
            height: auto;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(56, 189, 248, 0.3);
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #38bdf8, #0ea5e9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: #cbd5e1;
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .info-banner {
            background: rgba(56, 189, 248, 0.1);
            border-left: 4px solid #38bdf8;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            font-size: 0.95em;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #38bdf8, #0ea5e9);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(56, 189, 248, 0.3);
        }

        .btn-secondary {
            background: rgba(148, 163, 184, 0.2);
            color: #cbd5e1;
            border: 1px solid #475569;
        }

        .btn-secondary:hover {
            background: rgba(148, 163, 184, 0.3);
        }

        .quiz-section {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .quiz-section.active {
            display: block;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .question-card {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(56, 189, 248, 0.2);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
        }

        .question-number {
            color: #38bdf8;
            font-weight: 700;
            font-size: 0.9em;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .question-text {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            padding: 15px 20px;
            border: 2px solid rgba(56, 189, 248, 0.2);
            border-radius: 8px;
            background: rgba(15, 23, 42, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.05em;
        }

        .option:hover {
            border-color: #38bdf8;
            background: rgba(56, 189, 248, 0.1);
            transform: translateX(5px);
        }

        .option.selected {
            border-color: #38bdf8;
            background: rgba(56, 189, 248, 0.2);
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none;
            font-size: 0.95em;
            line-height: 1.6;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: rgba(16, 185, 129, 0.15);
            color: #86efac;
            border-left: 4px solid #10b981;
        }

        .feedback.incorrect {
            background: rgba(239, 68, 68, 0.15);
            color: #fca5a5;
            border-left: 4px solid #ef4444;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            gap: 15px;
        }

        .progress-bar {
            flex: 1;
            height: 8px;
            background: rgba(56, 189, 248, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #38bdf8, #0ea5e9);
            transition: width 0.5s ease;
        }

        .results {
            background: rgba(30, 41, 59, 0.8);
            border: 2px solid rgba(56, 189, 248, 0.3);
            border-radius: 16px;
            padding: 40px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .score {
            font-size: 4em;
            font-weight: 700;
            background: linear-gradient(135deg, #38bdf8, #10b981);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 20px 0;
        }

        .discount-badge {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            font-size: 1.3em;
            font-weight: 700;
            color: #1f2937;
        }

        .results-message {
            font-size: 1.3em;
            margin: 20px 0;
            line-height: 1.6;
        }

        .settings-section {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(56, 189, 248, 0.2);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
        }

        .settings-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #38bdf8;
        }

        .edit-label {
            color: #cbd5e1;
            font-weight: 600;
            margin-bottom: 8px;
            display: block;
            font-size: 0.9em;
        }

        .edit-input {
            width: 100%;
            padding: 12px;
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(56, 189, 248, 0.2);
            border-radius: 8px;
            color: #f1f5f9;
            font-family: inherit;
            margin-bottom: 15px;
            font-size: 0.95em;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #38bdf8;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .question-text {
                font-size: 1.1em;
            }

            .btn {
                width: 100%;
            }

            .score {
                font-size: 2.5em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="https://user-gen-media-assets.s3.amazonaws.com/seedream_images/4b483110-a690-4316-9e5d-ae3237642289.png" alt="Sistema Imunit√°rio Premium" class="premium-image">
            <h1>Sistema Imunit√°rio & Defesas</h1>
            <p class="subtitle">Quiz Interativo - Educa√ß√£o Farmac√™utica em Suplementa√ß√£o</p>
            <div class="info-banner">
                ‚ÑπÔ∏è Responda corretamente a todas as 15 quest√µes e ganhe um vale de desconto exclusivo!
            </div>
        </div>

        <div class="controls">
            <button class="btn btn-primary" onclick="startQuiz()" id="startBtn">Iniciar Quiz</button>
            <button class="btn btn-secondary" onclick="toggleDiscountOption()" id="discountBtn" style="display: none;">üí≥ Gerir Desconto</button>
        </div>

        <div class="settings-section" id="discountSection" style="display: none;">
            <div class="settings-title">üí≥ Configura√ß√µes de Desconto</div>
            <div class="checkbox-group">
                <input type="checkbox" id="enableDiscount" checked>
                <label for="enableDiscount" style="margin: 0; cursor: pointer;">Ativar vale de 5% de desconto</label>
            </div>
            <label class="edit-label">C√≥digo de Desconto:</label>
            <input type="text" class="edit-input" id="discountCode" placeholder="Ex: LIGA_QUIZ_IMUNO" value="LIGA_QUIZ_IMUNO">
            <label class="edit-label">Valor de Desconto (%):</label>
            <input type="number" class="edit-input" id="discountPercent" placeholder="5" value="5" min="1" max="100">
            <button class="btn btn-primary" onclick="saveDiscountSettings()" style="margin-top: 20px;">Guardar Configura√ß√µes</button>
            <button class="btn btn-secondary" onclick="toggleDiscountOption()" style="margin-top: 10px;">Fechar</button>
        </div>

        <div class="quiz-section active" id="quizStartSection">
            <div class="question-card" style="text-align: center; padding: 60px 30px;">
                <h2>Bem-vindo ao Quiz de Imunidade!</h2>
                <p style="margin-top: 20px; font-size: 1.1em; color: #cbd5e1;">
                    Teste os seus conhecimentos sobre o sistema imunit√°rio e os suplementos mais eficazes para refor√ßar as suas defesas. 
                    <br><br>
                    Clique em "Iniciar Quiz" para come√ßar!
                </p>
            </div>
        </div>

        <div class="quiz-section" id="quizSection"></div>

        <div class="quiz-section" id="resultsSection">
            <div class="results">
                <h2>Parab√©ns! üéâ</h2>
                <div class="score" id="scoreDisplay">0/15</div>
                <div class="results-message" id="resultMessage"></div>
                <div class="discount-badge" id="discountBadge" style="display: none;">
                    üéÅ Vale de <span id="discountPercentDisplay">5</span>% de Desconto Desbloqueado!
                    <br><small style="font-size: 0.7em; margin-top: 10px; display: block;">C√≥digo: <span id="discountCodeDisplay">LIGA_QUIZ_IMUNO</span></small>
                </div>
                <button class="btn btn-primary" onclick="restartQuiz()" style="margin-top: 30px;">Repetir Quiz</button>
            </div>
        </div>
    </div>

    <script>
        const defaultQuestions = [
            {
                question: "Qual √© a principal fun√ß√£o da vitamina D no sistema imunit√°rio?",
                options: ["Produzir hemoglobina", "Ajudar as c√©lulas de defesa a reconhecer e atacar v√≠rus e bact√©rias", "Acelerar o metabolismo", "Apenas fortalecer os ossos"],
                correct: 1,
                feedback: "A vitamina D funciona como um 'sinal' que ativa as c√©lulas de defesa do corpo. Sem vitamina D suficiente, o corpo fica confuso e as defesas reagem muito lentamente."
            },
            {
                question: "Porque √© que o zinco √© t√£o falado quando se fala em defesas?",
                options: ["Porque d√° sono", "Porque ajuda as c√©lulas de defesa a trabalhar muito mais depressa e eficientemente", "Porque aumenta o apetite", "Porque muda a cor do sangue"],
                correct: 1,
                feedback: "O zinco √© como o 'combust√≠vel' das c√©lulas de defesa. Sem ele, as defesas funcionam em c√¢mara lenta. Pessoas com falta de zinco ficam doentes 3x mais vezes."
            },
            {
                question: "Porque √© que tomar zinco nos primeiros sintomas de constipa√ß√£o funciona melhor?",
                options: ["Porque o frio sai do corpo mais depressa", "Porque o corpo ainda n√£o deixou o v√≠rus estabelecer-se completamente", "Porque o zinco muda a cor da l√≠ngua", "Porque ativa a tosse"],
                correct: 1,
                feedback: "Nos primeiros sintomas, o v√≠rus ainda est√° fraco e o corpo consegue venc√™-lo com ajuda de zinco. Depois de 24h, o v√≠rus j√° se instalou bem."
            },
            {
                question: "Qual √© a melhor forma de garantir vitamina C todos os dias?",
                options: ["Comer fruta e legumes coloridos ao longo do dia", "Evitar toda a fruta", "Beber apenas refrigerantes com cor", "Tomar sempre o m√°ximo poss√≠vel"],
                correct: 0,
                feedback: "Uma laranja tem tanta vitamina C como muitos suplementos! A fruta fresca absorve-se melhor. Morango, kiwi e pimento vermelho s√£o campe√µes."
            },
            {
                question: "O que caracteriza a imunidade inata?",
                options: ["√â adquirida ao longo da vida", "√â a primeira linha de defesa com que nascemos e reage em minutos", "Precisa sempre de vacina√ß√£o", "S√≥ funciona em crian√ßas"],
                correct: 1,
                feedback: "A imunidade inata √© como um guarda de seguran√ßa sempre alerta. N√£o precisa conhecer o inimigo para atacar - protege-nos na primeira exposi√ß√£o."
            },
            {
                question: "Se est√° com defici√™ncia de vitamina D, que sintoma pode aparecer primeiro?",
                options: ["Cansa√ßo persistente", "Aumento de infe√ß√µes respirat√≥rias", "Alergia a chocolate", "Mudan√ßa de cor dos olhos"],
                correct: 1,
                feedback: "Vitamina D baixa significa defesas fracas, o que resulta em mais constipa√ß√µes e gripes. √â especialmente comum no inverno."
            },
            {
                question: "A vitamina C funciona como limpadora de res√≠duos t√≥xicos durante infe√ß√µes?",
                options: ["Falso, s√≥ colore a urina", "Verdadeiro, protege as c√©lulas contra danos", "Verdadeiro, mas s√≥ em suplemento", "Falso, s√≥ √°gua quente faz isso"],
                correct: 1,
                feedback: "Quando o corpo combate infe√ß√µes, cria res√≠duos perigosos que danificam c√©lulas. Vitamina C limpa esses res√≠duos e acelera a recupera√ß√£o."
            },
            {
                question: "Em que situa√ß√µes faz sentido suplementar zinco?",
                options: ["Quando a alimenta√ß√£o √© desequilibrada ou fica frequentemente doente", "Sempre que se sente bem", "Apenas por moda", "Para evitar completamente todas as doen√ßas"],
                correct: 0,
                feedback: "Se come pouca carne, frango ou marisco e fica doente 3+ vezes por inverno, zinco pode transformar sua sa√∫de."
            },
            {
                question: "Qual planta famosa aparece em xaropes h√° 100 anos?",
                options: ["Pr√≥polis", "Gengibre", "Sabugueiro", "Alca√ßuz"],
                correct: 2,
                feedback: "Sabugueiro √© usado pelas av√≥s h√° gera√ß√µes. Estudos confirmam que reduz dura√ß√£o de constipa√ß√µes em 3-4 dias."
            },
            {
                question: "Porque √© a c√∫rcuma famosa?",
                options: ["S√≥ d√° sabor", "√â cara sem efeito", "Ajuda a controlar inflama√ß√£o do corpo", "Substitui todos os medicamentos"],
                correct: 2,
                feedback: "C√∫rcuma √© usada h√° 5000 anos na √çndia. Quando o corpo exagera na rea√ß√£o inflamat√≥ria, c√∫rcuma ajuda a acalmar."
            },
            {
                question: "Com o que deve combinar c√∫rcuma para melhor absor√ß√£o?",
                options: ["Gengibre", "Pimenta preta", "Mel", "Sal"],
                correct: 1,
                feedback: "Pimenta preta (piperina) √© como um turbocompressor para c√∫rcuma. Sozinha absorve-se pouco, com pimenta a absor√ß√£o dispara!"
            },
            {
                question: "Porque √© que 70% das defesas est√£o ligadas ao intestino?",
                options: ["S√≥ aumenta apetite", "Bact√©rias amigas ensinam defesas a distinguir amigos de inimigos", "Ocupam espa√ßo dos v√≠rus", "Transformam comida em super-poder"],
                correct: 1,
                feedback: "Probi√≥ticos s√£o treinadores das defesas. Ensinam ao corpo o que √© perigoso e o que √© amigo. Intestino desequilibrado significa defesas confusas."
            },
            {
                question: "Porque probi√≥ticos refor√ßam defesas em quem tem problemas digestivos?",
                options: ["D√£o superpoderes", "Intestino saud√°vel √© a base da imunidade", "Mudam cor das fezes", "Fazem perder peso automaticamente"],
                correct: 1,
                feedback: "Intestino com flora fraca √© barreira fraca. Restaurar flora intestinal √© restaurar o quartel-general das defesas."
            },
            {
                question: "Porque Echinacea foi usada por s√©culos contra constipa√ß√µes?",
                options: ["Tinha sabor agrad√°vel", "Estimula o corpo a reconhecer e atacar invasores mais r√°pido", "Substitui todas as defesas", "Aumenta temperatura corporal"],
                correct: 1,
                feedback: "Echinacea acorda o sistema imunit√°rio deixando defesas mais atentas. Tomada nos primeiros sintomas pode parar constipa√ß√µes."
            },
            {
                question: "Qual benef√≠cio de investir 3-6 meses em refor√ßar defesas?",
                options: ["Nunca mais ficar doente", "Ficar doente 50-70% menos vezes e recuperar 3-5 dias mais r√°pido", "N√£o precisar de m√©dicos", "Virar super-humano"],
                correct: 1,
                feedback: "√â realista: em vez de 6-8 constipa√ß√µes por inverno, ter√° 2-3. Recupera√ß√£o em 4-5 dias em vez de 10. Poupa tempo, dinheiro e qualidade de vida."
            }
        ];

        console.log("TOTAL DE PERGUNTAS:", defaultQuestions.length);

        let questions = [...defaultQuestions];
        let currentQuestion = 0;
        let score = 0;
        let answered = [];
        let enableDiscount = true;
        let discountCode = "LIGA_QUIZ_IMUNO";
        let discountPercent = 5;

        function checkAdminAccess() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('admin') === 'fligacol2023') {
                document.getElementById('discountBtn').style.display = 'inline-block';
            }
        }

        function initQuiz() {
            answered = new Array(questions.length).fill(null);
            currentQuestion = 0;
            score = 0;
            loadQuizSection();
        }

        function startQuiz() {
            document.getElementById('quizStartSection').classList.remove('active');
            document.getElementById('quizSection').classList.add('active');
            initQuiz();
        }

        function loadQuizSection() {
            const quizSection = document.getElementById('quizSection');
            quizSection.innerHTML = '';

            questions.forEach((q, idx) => {
                const card = document.createElement('div');
                card.className = 'question-card';
                card.innerHTML = `
                    <div class="question-number">Pergunta ${idx + 1} de ${questions.length}</div>
                    <div class="question-text">${q.question}</div>
                    <div class="options">
                        ${q.options.map((opt, optIdx) => `
                            <div class="option" onclick="selectOption(${idx}, ${optIdx})" id="opt-${idx}-${optIdx}">
                                ${String.fromCharCode(65 + optIdx)}. ${opt}
                            </div>
                        `).join('')}
                    </div>
                    <div class="feedback" id="feedback-${idx}"></div>
                `;
                quizSection.appendChild(card);
            });

            const nav = document.createElement('div');
            nav.className = 'navigation';
            nav.innerHTML = `
                <button class="btn btn-secondary" onclick="previousQuestion()" id="prevBtn" style="display: none;">‚Üê Anterior</button>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: ${(1 / questions.length) * 100}%;"></div>
                </div>
                <button class="btn btn-primary" onclick="nextQuestion()" id="nextBtn">Pr√≥xima ‚Üí</button>
            `;
            quizSection.appendChild(nav);

            showQuestion(0);
        }

        function showQuestion(idx) {
            document.querySelectorAll('.question-card').forEach((card, i) => {
                card.style.display = i === idx ? 'block' : 'none';
            });

            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const progressFill = document.getElementById('progressFill');

            prevBtn.style.display = idx > 0 ? 'block' : 'none';
            nextBtn.textContent = idx === questions.length - 1 ? 'Terminar Quiz ‚úì' : 'Pr√≥xima ‚Üí';
            progressFill.style.width = ((idx + 1) / questions.length * 100) + '%';

            if (answered[idx] !== null) {
                document.getElementById(`opt-${idx}-${answered[idx]}`).classList.add('selected');
            }
        }

        function selectOption(qIdx, optIdx) {
            if (answered[qIdx] !== null) return;
            
            answered[qIdx] = optIdx;
            const question = questions[qIdx];
            const isCorrect = optIdx === question.correct;

            document.getElementById(`opt-${qIdx}-${optIdx}`).classList.add('selected');

            const feedback = document.getElementById(`feedback-${qIdx}`);
            feedback.textContent = question.feedback;
            feedback.classList.add('show', isCorrect ? 'correct' : 'incorrect');

            if (isCorrect) score++;
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion(currentQuestion);
            } else {
                finishQuiz();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion(currentQuestion);
            }
        }

        function finishQuiz() {
            document.getElementById('quizSection').classList.remove('active');
            document.getElementById('resultsSection').classList.add('active');

            const scorePercentage = Math.round((score / questions.length) * 100);
            document.getElementById('scoreDisplay').textContent = `${score}/${questions.length}`;

            let message = scorePercentage === 100 ? "Excelente! Voc√™ √© um especialista em suplementa√ß√£o e imunidade! üåü" :
                         scorePercentage >= 80 ? "Muito bom! Demonstra s√≥lidos conhecimentos sobre defesas e suplementos." :
                         scorePercentage >= 60 ? "Bom desempenho! Continue a aprender sobre nutri√ß√£o e imunidade." :
                         "Continue estudando! H√° muito para descobrir sobre o sistema imunit√°rio.";

            document.getElementById('resultMessage').textContent = message;

            const discountBadge = document.getElementById('discountBadge');
            if (enableDiscount && score === questions.length) {
                discountBadge.style.display = 'block';
                document.getElementById('discountCodeDisplay').textContent = discountCode;
                document.getElementById('discountPercentDisplay').textContent = discountPercent;
            } else {
                discountBadge.style.display = 'none';
            }
        }

        function restartQuiz() {
            document.getElementById('resultsSection').classList.remove('active');
            document.getElementById('quizStartSection').classList.add('active');
            score = 0;
            answered = [];
            currentQuestion = 0;
        }

        function toggleDiscountOption() {
            const section = document.getElementById('discountSection');
            section.style.display = section.style.display === 'none' ? 'block' : 'none';
            if (section.style.display === 'block') {
                document.getElementById('enableDiscount').checked = enableDiscount;
                document.getElementById('discountCode').value = discountCode;
                document.getElementById('discountPercent').value = discountPercent;
            }
        }

        function saveDiscountSettings() {
            enableDiscount = document.getElementById('enableDiscount').checked;
            discountCode = document.getElementById('discountCode').value;
            discountPercent = parseInt(document.getElementById('discountPercent').value) || 5;
            alert('‚úì Configura√ß√µes guardadas!');
            toggleDiscountOption();
        }

        checkAdminAccess();
    </script>
</body>
</html>
