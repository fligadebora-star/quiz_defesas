<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz - Sistema Imunit√°rio e Suplementos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1f3a 0%, #0d1929 100%);
            min-height: 100vh;
            padding: 20px;
            color: #f1f5f9;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: slideDown 0.8s ease-out;
        }

        .premium-image {
            max-width: 100%;
            height: auto;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(56, 189, 248, 0.3);
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #38bdf8, #0ea5e9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: #cbd5e1;
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .info-banner {
            background: rgba(56, 189, 248, 0.1);
            border-left: 4px solid #38bdf8;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            font-size: 0.95em;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #38bdf8, #0ea5e9);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(56, 189, 248, 0.3);
        }

        .btn-secondary {
            background: rgba(148, 163, 184, 0.2);
            color: #cbd5e1;
            border: 1px solid #475569;
        }

        .btn-secondary:hover {
            background: rgba(148, 163, 184, 0.3);
        }

        .btn-danger {
            background: rgba(239, 68, 68, 0.2);
            color: #fca5a5;
            border: 1px solid #dc2626;
        }

        .btn-danger:hover {
            background: rgba(239, 68, 68, 0.3);
        }

        .quiz-section {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .quiz-section.active {
            display: block;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .question-card {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(56, 189, 248, 0.2);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
        }

        .question-number {
            color: #38bdf8;
            font-weight: 700;
            font-size: 0.9em;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .question-text {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            padding: 15px 20px;
            border: 2px solid rgba(56, 189, 248, 0.2);
            border-radius: 8px;
            background: rgba(15, 23, 42, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.05em;
        }

        .option:hover {
            border-color: #38bdf8;
            background: rgba(56, 189, 248, 0.1);
            transform: translateX(5px);
        }

        .option.selected {
            border-color: #38bdf8;
            background: rgba(56, 189, 248, 0.2);
        }

        .option.correct {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.2);
        }

        .option.incorrect {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.2);
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none;
            font-size: 0.95em;
            line-height: 1.6;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: rgba(16, 185, 129, 0.15);
            color: #86efac;
            border-left: 4px solid #10b981;
        }

        .feedback.incorrect {
            background: rgba(239, 68, 68, 0.15);
            color: #fca5a5;
            border-left: 4px solid #ef4444;
        }

        .product-link {
            color: #38bdf8;
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
            border-bottom: 1px dotted #38bdf8;
        }

        .product-link:hover {
            color: #0ea5e9;
        }

        .product-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .product-modal.show {
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            background: #1e293b;
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            border: 1px solid rgba(56, 189, 248, 0.2);
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-close {
            float: right;
            cursor: pointer;
            font-size: 2em;
            color: #cbd5e1;
        }

        .modal-close:hover {
            color: #ef4444;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            gap: 15px;
        }

        .progress-bar {
            flex: 1;
            height: 8px;
            background: rgba(56, 189, 248, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #38bdf8, #0ea5e9);
            transition: width 0.5s ease;
        }

        .results {
            background: rgba(30, 41, 59, 0.8);
            border: 2px solid rgba(56, 189, 248, 0.3);
            border-radius: 16px;
            padding: 40px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .score {
            font-size: 4em;
            font-weight: 700;
            background: linear-gradient(135deg, #38bdf8, #10b981);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 20px 0;
        }

        .discount-badge {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            font-size: 1.3em;
            font-weight: 700;
            color: #1f2937;
        }

        .results-message {
            font-size: 1.3em;
            margin: 20px 0;
            line-height: 1.6;
        }

        .edit-section {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(56, 189, 248, 0.2);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
        }

        .edit-label {
            color: #cbd5e1;
            font-weight: 600;
            margin-bottom: 8px;
            display: block;
            font-size: 0.9em;
        }

        .edit-input {
            width: 100%;
            padding: 12px;
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(56, 189, 248, 0.2);
            border-radius: 8px;
            color: #f1f5f9;
            font-family: inherit;
            margin-bottom: 15px;
            font-size: 0.95em;
        }

        .edit-input:focus {
            outline: none;
            border-color: #38bdf8;
            box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.1);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #38bdf8;
        }

        .settings-toggle {
            background: rgba(148, 163, 184, 0.2);
            color: #cbd5e1;
            border: 1px solid #475569;
        }

        .settings-toggle:hover {
            background: rgba(148, 163, 184, 0.3);
        }

        .settings-section {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(56, 189, 248, 0.2);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
        }

        .settings-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #38bdf8;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .question-text {
                font-size: 1.1em;
            }

            .controls {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }

            .score {
                font-size: 2.5em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <div class="header">
            <img src="https://user-gen-media-assets.s3.amazonaws.com/seedream_images/4b483110-a690-4316-9e5d-ae3237642289.png" alt="Sistema Imunit√°rio Premium" class="premium-image">
            <h1>Sistema Imunit√°rio & Defesas</h1>
            <p class="subtitle">Quiz Interativo - Educa√ß√£o Farmac√™utica em Suplementa√ß√£o</p>
            <div class="info-banner">
                ‚ÑπÔ∏è Responda corretamente a todas as 20 quest√µes e ganhe um vale de desconto exclusivo!
            </div>
        </div>

        <!-- CONTROLS -->
        <div class="controls">
            <button class="btn btn-primary" onclick="startQuiz()" id="startBtn">Iniciar Quiz</button>
            <button class="btn btn-secondary settings-toggle" onclick="toggleSettings()" id="editBtn" style="display: none;">‚öôÔ∏è Editar Conte√∫do</button>
            <button class="btn btn-secondary" onclick="toggleDiscountOption()" id="discountBtn" style="display: none;">üí≥ Gerir Desconto</button>
        </div>

        <!-- SETTINGS SECTION -->
        <div class="settings-section" id="settingsSection" style="display: none;">
            <div class="settings-title">üìù Editar Quiz e Conte√∫do</div>
            <div id="editableQuestions"></div>
            <button class="btn btn-primary" onclick="saveEdits()" style="margin-top: 20px;">Guardar Altera√ß√µes</button>
            <button class="btn btn-secondary" onclick="toggleSettings()" style="margin-top: 10px;">Fechar</button>
        </div>

        <!-- DISCOUNT SETTINGS -->
        <div class="settings-section" id="discountSection" style="display: none;">
            <div class="settings-title">üí≥ Configura√ß√µes de Desconto</div>
            <div class="checkbox-group">
                <input type="checkbox" id="enableDiscount" checked>
                <label for="enableDiscount" style="margin: 0; cursor: pointer;">Ativar vale de 10% de desconto</label>
            </div>
            <label class="edit-label">C√≥digo de Desconto (opcional):</label>
            <input type="text" class="edit-input" id="discountCode" placeholder="Ex: SAUDE2024" value="SAUDE2024">
            <label class="edit-label">URL do Vale de Desconto:</label>
            <input type="text" class="edit-input" id="discountUrl" placeholder="https://seu-site.com/vale" value="">
            <button class="btn btn-primary" onclick="saveDiscountSettings()" style="margin-top: 20px;">Guardar Configura√ß√µes</button>
            <button class="btn btn-secondary" onclick="toggleDiscountOption()" style="margin-top: 10px;">Fechar</button>
        </div>

        <!-- QUIZ SECTION -->
        <div class="quiz-section active" id="quizStartSection">
            <div class="question-card" style="text-align: center; padding: 60px 30px;">
                <h2>Bem-vindo ao Quiz de Imunidade!</h2>
                <p style="margin-top: 20px; font-size: 1.1em; color: #cbd5e1;">
                    Teste os seus conhecimentos sobre o sistema imunit√°rio e os suplementos mais eficazes para refor√ßar as suas defesas. 
                    <br><br>
                    Clique em "Iniciar Quiz" para come√ßar!
                </p>
            </div>
        </div>

        <!-- QUIZ QUESTIONS -->
        <div class="quiz-section" id="quizSection"></div>

        <!-- RESULTS SECTION -->
        <div class="quiz-section" id="resultsSection">
            <div class="results">
                <h2>Parab√©ns! üéâ</h2>
                <div class="score" id="scoreDisplay">0/20</div>
                <div class="results-message" id="resultMessage"></div>
                <div class="discount-badge" id="discountBadge" style="display: none;">
                    üéÅ Vale de 10% de Desconto Desbloqueado!
                    <br><small style="font-size: 0.7em; margin-top: 10px; display: block;">C√≥digo: <span id="discountCodeDisplay">SAUDE2024</span></small>
                </div>
                <button class="btn btn-primary" onclick="restartQuiz()" style="margin-top: 30px;">Repetir Quiz</button>
            </div>
        </div>
    </div>

    <!-- PRODUCT MODAL -->
    <div class="product-modal" id="productModal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeProductModal()">&times;</span>
            <div id="productContent"></div>
            <input type="text" class="edit-input" id="productLink" placeholder="Cole o link do produto aqui" style="margin-top: 20px;">
            <button class="btn btn-primary" onclick="setProductLink()" style="width: 100%; margin-top: 10px;">Aplicar Link</button>
        </div>
    </div>

    <script>
    // Default quiz data
    const defaultQuestions = [
        {
            question: "Qual √© a principal fun√ß√£o da vitamina D no sistema imunit√°rio?",
            options: [
                "Produzir hemoglobina",
                "Regular as respostas imunit√°rias (inata e adaptativa)",
                "Acelerar o metabolismo",
                "Apenas fortalecer os ossos"
            ],
            correct: 1,
            feedback: "A vitamina D ajuda o sistema imunit√°rio a reconhecer e a reagir melhor a v√≠rus e bact√©rias. Tamb√©m contribui para que o corpo n√£o exagere na inflama√ß√£o quando est√° a defender-se.",
            supplement: "Vitamina D3"
        },
        {
            question: "Porque √© que o zinco √© t√£o falado quando se fala em defesas?",
            options: [
                "Porque d√° sono",
                "Porque ajuda as c√©lulas de defesa a funcionar melhor",
                "Porque aumenta o apetite",
                "Porque muda a cor do sangue"
            ],
            correct: 1,
            feedback: "O zinco √© importante para v√°rias c√©lulas do sistema imunit√°rio trabalharem de forma eficaz. Quando falta zinco, o corpo pode ficar mais vulner√°vel a infe√ß√µes.",
            supplement: "Zinco Bisglicinato"
        },
        {
            question: "Quantas horas ap√≥s o in√≠cio dos sintomas deve tomar zinco para m√°xima efic√°cia?",
            options: [
                "48 horas",
                "72 horas",
                "24 horas",
                "1 semana"
            ],
            correct: 2,
            feedback: "O zinco tende a ser mais √∫til quando √© iniciado logo nas primeiras horas dos sintomas, sempre dentro das doses aconselhadas por um profissional de sa√∫de.",
            supplement: "Zinco"
        },
        {
            question: "Qual √© a melhor forma de garantir vitamina C todos os dias?",
            options: [
                "Comer fruta e legumes coloridos ao longo do dia",
                "Evitar toda a fruta",
                "Beber apenas refrigerantes",
                "Tomar sempre o dobro da dose indicada"
            ],
            correct: 0,
            feedback: "A base para uma boa ingest√£o de vitamina C √© uma alimenta√ß√£o rica em fruta e legumes. Os suplementos podem ajudar em fases de maior necessidade.",
            supplement: "Vitamina C"
        },
        {
            question: "O que caracteriza a imunidade inata?",
            options: [
                "√â a parte das defesas que adquirimos ao longo da vida",
                "√â a parte das defesas com a qual j√° nascemos",
                "√â a que precisa sempre de vacina√ß√£o",
                "√â a que s√≥ funciona em crian√ßas"
            ],
            correct: 1,
            feedback: "A imunidade inata √© a defesa com que j√° nascemos e que atua de forma r√°pida e geral contra muitos microrganismos.",
            supplement: "Vitamina D"
        },
        {
            question: "O que √© importante ter em aten√ß√£o antes de tomar vitamina D em suplemento?",
            options: [
                "Se combina com a cor dos comprimidos habituais",
                "Confirmar com um profissional de sa√∫de se a dose faz sentido para si",
                "Tomar sempre a dose mais alta poss√≠vel",
                "Tomar s√≥ quando est√° sol"
            ],
            correct: 1,
            feedback: "A vitamina D √© essencial, mas a dose certa pode variar de pessoa para pessoa. √â importante confirmar com o m√©dico ou farmac√™utico, sobretudo se j√° toma outros medicamentos ou tem doen√ßas cr√≥nicas.",
            supplement: "Vitamina D"
        },
        {
            question: "A vitamina C funciona como antioxidante ao proteger contra...",
            options: [
                "Bact√©rias apenas",
                "Radicais livres e stress oxidativo",
                "O sono",
                "A sede"
            ],
            correct: 1,
            feedback: "A vitamina C ajuda a proteger as c√©lulas do corpo contra o chamado ‚Äústress oxidativo‚Äù, que est√° ligado ao desgaste do organismo.",
            supplement: "Vitamina C"
        },
        {
            question: "Em que situa√ß√µes faz mais sentido pensar em suplementar zinco?",
            options: [
                "Quando a alimenta√ß√£o √© muito desequilibrada ou h√° maior vulnerabilidade a infe√ß√µes",
                "Sempre que se sente perfeitamente bem e sem qualquer queixa",
                "Apenas porque est√° na moda",
                "S√≥ para mudar a cor das unhas"
            ],
            correct: 0,
            feedback: "O zinco pode ser √∫til em fases de maior fragilidade, alimenta√ß√£o pobre ou maior suscetibilidade a infe√ß√µes, mas deve ser avaliado caso a caso com um profissional de sa√∫de.",
            supplement: "Zinco"
        },
        {
            question: "Qual suplemento √† base de planta √© frequentemente associado a ajuda na gripe e constipa√ß√µes?",
            options: [
                "Pr√≥polis",
                "Gengibre",
                "Sabugueiro (Sambucus nigra)",
                "Alca√ßuz"
            ],
            correct: 2,
            feedback: "O sabugueiro √© tradicionalmente usado em produtos para constipa√ß√µes e gripe, podendo ajudar na gest√£o dos sintomas em alguns casos.",
            supplement: "Sabugueiro"
        },
        {
            question: "A curcumina (da c√∫rcuma) √© muitas vezes mencionada por ajudar a...",
            options: [
                "Aumentar apenas a sensa√ß√£o de sede",
                "Equilibrar a inflama√ß√£o e apoiar o sistema imunit√°rio",
                "Mudar a cor dos alimentos",
                "Substituir todas as refei√ß√µes"
            ],
            correct: 1,
            feedback: "A curcumina √© conhecida por ajudar a controlar processos inflamat√≥rios no organismo, o que pode ser relevante para o equil√≠brio das defesas.",
            supplement: "Curcumina + Piperina"
        },
        {
            question: "Para uma melhor utiliza√ß√£o pelo organismo, a curcumina √© muitas vezes combinada com...",
            options: [
                "Gengibre",
                "Piperina (pimenta preta)",
                "Mel",
                "Sal"
            ],
            correct: 1,
            feedback: "A piperina, presente na pimenta preta, pode aumentar a absor√ß√£o da curcumina, potenciando o seu efeito.",
            supplement: "Curcumina + Piperina"
        },
        {
            question: "Os probi√≥ticos s√£o interessantes para a imunidade porque...",
            options: [
                "Aumentam muito o a√ß√∫car no sangue",
                "Ajudam a equilibrar a flora intestinal, ligada √†s defesas",
                "Bloqueiam a absor√ß√£o de todos os nutrientes",
                "Substituem por completo as vacinas"
            ],
            correct: 1,
            feedback: "Grande parte das defesas do organismo est√° ligada ao intestino. Manter uma flora intestinal equilibrada pode apoiar o sistema imunit√°rio.",
            supplement: "Probi√≥ticos"
        },
        {
            question: "Como √© que os probi√≥ticos podem ajudar as defesas?",
            options: [
                "Apenas aumentando o apetite",
                "Ajudando a equilibrar o intestino, onde est√° grande parte do sistema imunit√°rio",
                "Substituindo totalmente o sono e a alimenta√ß√£o saud√°vel",
                "Impedindo qualquer infe√ß√£o para sempre"
            ],
            correct: 1,
            feedback: "Os probi√≥ticos ajudam a equilibrar a flora intestinal. Como uma parte importante das defesas do organismo est√° ligada ao intestino, isso pode apoiar o sistema imunit√°rio.",
            supplement: "Probi√≥ticos"
        },
        {
            question: "A echinacea √© habitualmente associada a...",
            options: [
                "Cuidar apenas da pele seca",
                "Apoio √†s defesas, especialmente em constipa√ß√µes ligeiras",
                "Substituir toda a alimenta√ß√£o",
                "Aumentar o a√ß√∫car no sangue"
            ],
            correct: 1,
            feedback: "A echinacea √© usada tradicionalmente em produtos que prometem apoiar o sistema imunit√°rio, sobretudo em constipa√ß√µes ligeiras.",
            supplement: "Echinacea"
        },
        {
            question: "Que vantagem pode ter come√ßar cedo a cuidar das defesas (sono, alimenta√ß√£o, suplementos adequados)?",
            options: [
                "Evitar para sempre qualquer infe√ß√£o",
                "Reduzir o risco de ficar doente e recuperar mais facilmente",
                "N√£o precisar de vacinas",
                "Nunca mais precisar de m√©dicos"
            ],
            correct: 1,
            feedback: "Um estilo de vida saud√°vel, combinado com suplementos bem escolhidos quando necess√°rio, ajuda o corpo a responder melhor aos desafios do dia a dia.",
            supplement: "Higiene de Vida + Suplementa√ß√£o"
        },
        {
            question: "Se o frio n√£o √© um v√≠rus, porque √© que no inverno ficamos mais vezes doentes?",
            options: [
                "Porque o frio transforma o ar em bact√©rias",
                "Porque passamos mais tempo em espa√ßos fechados, perto de outras pessoas, e alguns v√≠rus sobrevivem melhor com tempo frio",
                "Porque a √°gua da torneira fica diferente",
                "Porque o sistema imunit√°rio deixa de existir no inverno"
            ],
            correct: 1,
            feedback: "O frio em si n√£o causa constipa√ß√µes, mas no inverno estamos mais em espa√ßos fechados e pr√≥ximos uns dos outros, o que facilita a transmiss√£o dos v√≠rus. Alguns v√≠rus respirat√≥rios tamb√©m toleram melhor temperaturas mais baixas.",
            supplement: "Educa√ß√£o em Sa√∫de"
        },
        {
            question: "A vitamina A √© importante sobretudo para...",
            options: [
                "O crescimento das unhas",
                "As membranas mucosas (nariz, garganta, olhos)",
                "A cor do cabelo",
                "Aumentar a sede"
            ],
            correct: 1,
            feedback: "A vitamina A est√° ligada √† sa√∫de das mucosas e da vis√£o, ajudando a manter as primeiras linhas de defesa do organismo.",
            supplement: "Vitamina A"
        },
        {
            question: "Que fator do dia a dia mais prejudica o sistema imunit√°rio?",
            options: [
                "Dormir poucas horas de forma prolongada",
                "Beber √°gua ao longo do dia",
                "Fazer caminhadas moderadas",
                "Ter uma alimenta√ß√£o variada"
            ],
            correct: 0,
            feedback: "O sono insuficiente e de m√° qualidade, mantido ao longo do tempo, fragiliza as defesas do organismo.",
            supplement: "Higiene do Sono"
        },
        {
            question: "Que vantagens s√£o associadas ao pr√≥polis no contexto das defesas?",
            options: [
                "Apenas ado√ßa bebidas",
                "Pode ter a√ß√£o antibacteriana e ajudar a refor√ßar as defesas em alguns contextos",
                "Serve apenas para colorir alimentos",
                "Substitui todas as medidas de preven√ß√£o"
            ],
            correct: 1,
            feedback: "O pr√≥polis √© tradicionalmente usado pelo seu potencial para apoiar as defesas e complementar outras medidas de preven√ß√£o.",
            supplement: "Pr√≥polis"
        },
        {
            question: "Porque √© importante o aconselhamento farmac√™utico na escolha de suplementos para as defesas?",
            options: [
                "Porque o farmac√™utico decide por si sem o ouvir",
                "Para ajustar os suplementos √† idade, medicamentos e doen√ßas, evitando intera√ß√µes e excessos",
                "Porque todos os suplementos s√£o iguais",
                "Porque assim nunca mais precisa de ir ao m√©dico"
            ],
            correct: 1,
            feedback: "O farmac√™utico avalia o seu caso, verifica medicamentos que j√° toma e ajuda a escolher suplementos seguros e adequados √†s suas necessidades.",
            supplement: "Aconselhamento Farmac√™utico"
        }
    ];

    let questions = [...defaultQuestions];
    let currentQuestion = 0;
    let score = 0;
    let answered = [];
    let enableDiscount = true;
    let discountCode = "LIGA_IMUN_QUIZ";
    let isAdmin = false;

    // Verificar se o utilizador √© administrador (via URL)
    function checkAdminAccess() {
        const urlParams = new URLSearchParams(window.location.search);
        const adminKey = urlParams.get('admin');
        if (adminKey === 'fligacol2023') {
            isAdmin = true;
            const editBtn = document.getElementById('editBtn');
            const discountBtn = document.getElementById('discountBtn');
            if (editBtn) editBtn.style.display = 'inline-block';
            if (discountBtn) discountBtn.style.display = 'inline-block';
        }
    }

    function initQuiz() {
        answered = new Array(questions.length).fill(null);
        currentQuestion = 0;
        score = 0;
        loadQuizSection();
    }

    function startQuiz() {
        document.getElementById('quizStartSection').classList.remove('active');
        document.getElementById('quizSection').classList.add('active');
        initQuiz();
    }

    function loadQuizSection() {
        const quizSection = document.getElementById('quizSection');
        quizSection.innerHTML = '';

        questions.forEach((q, idx) => {
            const card = document.createElement('div');
            card.className = 'question-card';
            card.innerHTML = `
                <div class="question-number">Pergunta ${idx + 1} de ${questions.length}</div>
                <div class="question-text">${q.question}</div>
                <div class="options">
                    ${q.options.map((opt, optIdx) => `
                        <div class="option" onclick="selectOption(${idx}, ${optIdx})" id="opt-${idx}-${optIdx}">
                            ${String.fromCharCode(65 + optIdx)}. ${opt}
                        </div>
                    `).join('')}
                </div>
                <div class="feedback" id="feedback-${idx}"></div>
            `;
            quizSection.appendChild(card);
        });

        const nav = document.createElement('div');
        nav.className = 'navigation';
        nav.innerHTML = `
            <button class="btn btn-secondary" onclick="previousQuestion()" id="prevBtn" style="display: none;">‚Üê Anterior</button>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 5%;"></div>
            </div>
            <button class="btn btn-primary" onclick="nextQuestion()" id="nextBtn">Pr√≥xima ‚Üí</button>
        `;
        quizSection.appendChild(nav);

        showQuestion(0);
    }

    function showQuestion(idx) {
        document.querySelectorAll('.question-card').forEach((card, i) => {
            card.style.display = i === idx ? 'block' : 'none';
        });

        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const progressFill = document.getElementById('progressFill');

        prevBtn.style.display = idx > 0 ? 'block' : 'none';
        nextBtn.textContent = idx === questions.length - 1 ? 'Terminar Quiz ‚úì' : 'Pr√≥xima ‚Üí';
        progressFill.style.width = ((idx + 1) / questions.length) * 100 + '%';

        if (answered[idx] !== null) {
            const selected = answered[idx];
            document.getElementById(`opt-${idx}-${selected}`).classList.add('selected');
        }
    }

    function selectOption(qIdx, optIdx) {
        answered[qIdx] = optIdx;
        const question = questions[qIdx];
        const isCorrect = optIdx === question.correct;

        const option = document.getElementById(`opt-${qIdx}-${optIdx}`);
        option.classList.add('selected');

        const feedback = document.getElementById(`feedback-${qIdx}`);
        feedback.textContent = question.feedback;
        feedback.classList.add('show', isCorrect ? 'correct' : 'incorrect');

        if (isCorrect && !answered[qIdx + 1]) {
            score++;
        }
    }

    function nextQuestion() {
        if (currentQuestion < questions.length - 1) {
            currentQuestion++;
            showQuestion(currentQuestion);
        } else {
            finishQuiz();
        }
    }

    function previousQuestion() {
        if (currentQuestion > 0) {
            currentQuestion--;
            showQuestion(currentQuestion);
        }
    }

    function finishQuiz() {
        document.getElementById('quizSection').classList.remove('active');
        document.getElementById('resultsSection').classList.add('active');

        const scorePercentage = Math.round((score / questions.length) * 100);
        document.getElementById('scoreDisplay').textContent = `${score}/${questions.length}`;

        let message = '';
        if (scorePercentage === 100) {
            message = "Excelente! Mostrou um conhecimento muito s√≥lido sobre defesas e suplementos! üåü";
        } else if (scorePercentage >= 80) {
            message = "Muito bom! Demonstra bons conhecimentos sobre o sistema imunit√°rio.";
        } else if (scorePercentage >= 60) {
            message = "Bom desempenho! J√° sabe bastante, e pode continuar a descobrir mais.";
        } else {
            message = "Bom come√ßo! H√° muito para aprender sobre o sistema imunit√°rio ‚Äî conte connosco para o ajudar.";
        }

        document.getElementById('resultMessage').textContent = message;

        const discountBadge = document.getElementById('discountBadge');
        if (enableDiscount && score === questions.length) {
            discountBadge.style.display = 'block';
            document.getElementById('discountCodeDisplay').textContent = discountCode;
        } else {
            discountBadge.style.display = 'none';
        }
    }

    function restartQuiz() {
        document.getElementById('resultsSection').classList.remove('active');
        document.getElementById('quizStartSection').classList.add('active');
    }

    function toggleSettings() {
        const section = document.getElementById('settingsSection');
        section.style.display = section.style.display === 'none' ? 'block' : 'none';

        if (section.style.display === 'block') {
            const editableDiv = document.getElementById('editableQuestions');
            editableDiv.innerHTML = '';

            questions.forEach((q, idx) => {
                const qEdit = document.createElement('div');
                qEdit.className = 'edit-section';
                qEdit.innerHTML = `
                    <h4 style="color: #38bdf8; margin-bottom: 15px;">Pergunta ${idx + 1}</h4>
                    <label class="edit-label">Texto da Pergunta:</label>
                    <input type="text" class="edit-input" id="q-text-${idx}" value="${q.question}">
                    ${q.options.map((opt, optIdx) => `
                        <label class="edit-label">Op√ß√£o ${String.fromCharCode(65 + optIdx)}:</label>
                        <input type="text" class="edit-input" id="q-opt-${idx}-${optIdx}" value="${opt}">
                    `).join('')}
                    <label class="edit-label">Feedback/Resposta Correta:</label>
                    <textarea class="edit-input" id="q-feedback-${idx}" style="min-height: 80px;">${q.feedback}</textarea>
                    <label class="edit-label">Suplemento Associado:</label>
                    <input type="text" class="edit-input" id="q-supplement-${idx}" value="${q.supplement}">
                `;
                editableDiv.appendChild(qEdit);
            });
        }
    }

    function saveEdits() {
        questions.forEach((q, idx) => {
            q.question = document.getElementById(`q-text-${idx}`).value;
            q.options.forEach((_, optIdx) => {
                q.options[optIdx] = document.getElementById(`q-opt-${idx}-${optIdx}`).value;
            });
            q.feedback = document.getElementById(`q-feedback-${idx}`).value;
            q.supplement = document.getElementById(`q-supplement-${idx}`).value;
        });

        alert('‚úì Altera√ß√µes guardadas com sucesso!');
        toggleSettings();
    }

    function toggleDiscountOption() {
        const section = document.getElementById('discountSection');
        section.style.display = section.style.display === 'none' ? 'block' : 'none';

        if (section.style.display === 'block') {
            document.getElementById('enableDiscount').checked = enableDiscount;
            document.getElementById('discountCode').value = discountCode;
        }
    }

    function saveDiscountSettings() {
        enableDiscount = document.getElementById('enableDiscount').checked;
        discountCode = document.getElementById('discountCode').value;
        alert('‚úì Configura√ß√µes de desconto guardadas!');
        toggleDiscountOption();
    }

    // Product modal functions
    let currentProductQuestion = null;

    function openProductModal(qIdx) {
        currentProductQuestion = qIdx;
        const product = questions[qIdx].supplement;
        document.getElementById('productContent').innerHTML = `
            <h3 style="color: #38bdf8; margin-bottom: 15px;">Adicionar Link do Produto</h3>
            <p style="color: #cbd5e1; margin-bottom: 15px;">Suplemento: <strong>${product}</strong></p>
            <p style="color: #cbd5e1; font-size: 0.9em;">Cole o link para o produto no seu site ou loja online.</p>
        `;
        document.getElementById('productModal').classList.add('show');
    }

    function closeProductModal() {
        document.getElementById('productModal').classList.remove('show');
    }

    function setProductLink() {
        const link = document.getElementById('productLink').value;
        if (link) {
            alert('‚úì Link do produto adicionado com sucesso!');
            closeProductModal();
        } else {
            alert('Por favor, insira um URL v√°lido');
        }
    }

    // Chamar verifica√ß√£o de admin ao carregar a p√°gina
    checkAdminAccess();
</script>

</body>
</html>



