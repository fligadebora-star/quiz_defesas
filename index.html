<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz - Sistema Imunit√°rio e Suplementos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1f3a 0%, #0d1929 100%);
            min-height: 100vh;
            padding: 20px;
            color: #f1f5f9;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: slideDown 0.8s ease-out;
        }

        .premium-image {
            max-width: 100%;
            height: auto;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(56, 189, 248, 0.3);
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #38bdf8, #0ea5e9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: #cbd5e1;
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .info-banner {
            background: rgba(56, 189, 248, 0.1);
            border-left: 4px solid #38bdf8;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            font-size: 0.95em;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #38bdf8, #0ea5e9);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(56, 189, 248, 0.3);
        }

        .btn-secondary {
            background: rgba(148, 163, 184, 0.2);
            color: #cbd5e1;
            border: 1px solid #475569;
        }

        .btn-secondary:hover {
            background: rgba(148, 163, 184, 0.3);
        }

        .quiz-section {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .quiz-section.active {
            display: block;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .question-card {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(56, 189, 248, 0.2);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
        }

        .question-number {
            color: #38bdf8;
            font-weight: 700;
            font-size: 0.9em;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .question-text {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            padding: 15px 20px;
            border: 2px solid rgba(56, 189, 248, 0.2);
            border-radius: 8px;
            background: rgba(15, 23, 42, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.05em;
        }

        .option:hover {
            border-color: #38bdf8;
            background: rgba(56, 189, 248, 0.1);
            transform: translateX(5px);
        }

        .option.selected {
            border-color: #38bdf8;
            background: rgba(56, 189, 248, 0.2);
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none;
            font-size: 0.95em;
            line-height: 1.6;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: rgba(16, 185, 129, 0.15);
            color: #86efac;
            border-left: 4px solid #10b981;
        }

        .feedback.incorrect {
            background: rgba(239, 68, 68, 0.15);
            color: #fca5a5;
            border-left: 4px solid #ef4444;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            gap: 15px;
        }

        .progress-bar {
            flex: 1;
            height: 8px;
            background: rgba(56, 189, 248, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #38bdf8, #0ea5e9);
            transition: width 0.5s ease;
        }

        .results {
            background: rgba(30, 41, 59, 0.8);
            border: 2px solid rgba(56, 189, 248, 0.3);
            border-radius: 16px;
            padding: 40px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .score {
            font-size: 4em;
            font-weight: 700;
            background: linear-gradient(135deg, #38bdf8, #10b981);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 20px 0;
        }

        .discount-badge {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            font-size: 1.3em;
            font-weight: 700;
            color: #1f2937;
        }

        .results-message {
            font-size: 1.3em;
            margin: 20px 0;
            line-height: 1.6;
        }

        .edit-section {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(56, 189, 248, 0.2);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
        }

        .edit-label {
            color: #cbd5e1;
            font-weight: 600;
            margin-bottom: 8px;
            display: block;
            font-size: 0.9em;
        }

        .edit-input {
            width: 100%;
            padding: 12px;
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(56, 189, 248, 0.2);
            border-radius: 8px;
            color: #f1f5f9;
            font-family: inherit;
            margin-bottom: 15px;
            font-size: 0.95em;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #38bdf8;
        }

        .settings-section {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(56, 189, 248, 0.2);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
        }

        .settings-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #38bdf8;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .question-text {
                font-size: 1.1em;
            }

            .btn {
                width: 100%;
            }

            .score {
                font-size: 2.5em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="https://user-gen-media-assets.s3.amazonaws.com/seedream_images/4b483110-a690-4316-9e5d-ae3237642289.png" alt="Sistema Imunit√°rio Premium" class="premium-image">
            <h1>Sistema Imunit√°rio & Defesas</h1>
            <p class="subtitle">Quiz Interativo - Educa√ß√£o Farmac√™utica em Suplementa√ß√£o</p>
            <div class="info-banner">
                ‚ÑπÔ∏è Responda corretamente a todas as 20 quest√µes e ganhe um vale de desconto exclusivo!
            </div>
        </div>

        <div class="controls">
            <button class="btn btn-primary" onclick="startQuiz()" id="startBtn">Iniciar Quiz</button>
            <button class="btn btn-secondary" onclick="toggleSettings()" id="editBtn" style="display: none;">‚öôÔ∏è Editar Conte√∫do</button>
            <button class="btn btn-secondary" onclick="toggleDiscountOption()" id="discountBtn" style="display: none;">üí≥ Gerir Desconto</button>
        </div>

        <div class="settings-section" id="settingsSection" style="display: none;">
            <div class="settings-title">üìù Editar Quiz e Conte√∫do</div>
            <div id="editableQuestions"></div>
            <button class="btn btn-primary" onclick="saveEdits()" style="margin-top: 20px;">Guardar Altera√ß√µes</button>
            <button class="btn btn-secondary" onclick="toggleSettings()" style="margin-top: 10px;">Fechar</button>
        </div>

        <div class="settings-section" id="discountSection" style="display: none;">
            <div class="settings-title">üí≥ Configura√ß√µes de Desconto</div>
            <div class="checkbox-group">
                <input type="checkbox" id="enableDiscount" checked>
                <label for="enableDiscount" style="margin: 0; cursor: pointer;">Ativar vale de 5% de desconto</label>
            </div>
            <label class="edit-label">C√≥digo de Desconto:</label>
            <input type="text" class="edit-input" id="discountCode" placeholder="Ex: LIGA_QUIZ_IMUNO" value="LIGA_QUIZ_IMUNO">
            <label class="edit-label">Valor de Desconto (%):</label>
            <input type="number" class="edit-input" id="discountPercent" placeholder="5" value="5" min="1" max="100">
            <button class="btn btn-primary" onclick="saveDiscountSettings()" style="margin-top: 20px;">Guardar Configura√ß√µes</button>
            <button class="btn btn-secondary" onclick="toggleDiscountOption()" style="margin-top: 10px;">Fechar</button>
        </div>

        <div class="quiz-section active" id="quizStartSection">
            <div class="question-card" style="text-align: center; padding: 60px 30px;">
                <h2>Bem-vindo ao Quiz de Imunidade!</h2>
                <p style="margin-top: 20px; font-size: 1.1em; color: #cbd5e1;">
                    Teste os seus conhecimentos sobre o sistema imunit√°rio e os suplementos mais eficazes para refor√ßar as suas defesas. 
                    <br><br>
                    Clique em "Iniciar Quiz" para come√ßar!
                </p>
            </div>
        </div>

        <div class="quiz-section" id="quizSection"></div>

        <div class="quiz-section" id="resultsSection">
            <div class="results">
                <h2>Parab√©ns! üéâ</h2>
                <div class="score" id="scoreDisplay">0/20</div>
                <div class="results-message" id="resultMessage"></div>
                <div class="discount-badge" id="discountBadge" style="display: none;">
                    üéÅ Vale de <span id="discountPercentDisplay">5</span>% de Desconto Desbloqueado! N√£o aplic√°vel em produtos com descontos (expto desc. cliente) ou campanhas, nem em medicamentos. 
                    <br><small style="font-size: 0.7em; margin-top: 10px; display: block;">C√≥digo: <span id="discountCodeDisplay">LIGA_QUIZ_IMUNO</span></small>
                </div>
                <button class="btn btn-primary" onclick="restartQuiz()" style="margin-top: 30px;">Repetir Quiz</button>
            </div>
        </div>
    </div>

    <script>
        const defaultQuestions = [
            { question: "Qual √© a principal fun√ß√£o da vitamina D no sistema imunit√°rio?", options: ["Produzir hemoglobina", "Ajudar as c√©lulas de defesa a reconhecer e atacar v√≠rus e bact√©rias", "Acelerar o metabolismo", "Apenas fortalecer os ossos"], correct: 1, feedback: "A vitamina D funciona como um 'sinal' que ativa as c√©lulas de defesa do corpo. Sem vitamina D suficiente, o corpo fica confuso e as defesas reagem muito lentamente. Por isso no inverno, com menos sol, as constipa√ß√µes aumentam.", supplement: "https://www.farmaciadaliga.pt/bioactivo-vitamina-d-capsulas-moles-240-unidades-preco-especial.html" },
            { question: "Porque √© que o zinco √© t√£o falado quando se fala em defesas?", options: ["Porque d√° sono", "Porque ajuda as c√©lulas de defesa a trabalhar muito mais depressa e eficientemente", "Porque aumenta o apetite", "Porque muda a cor do sangue"], correct: 1, feedback: "O zinco √© como o 'combust√≠vel' das c√©lulas de defesa. Sem ele, as defesas funcionam em c√¢mara lenta. Pessoas com falta de zinco ficam doentes 3 vezes mais. A boa not√≠cia? Uma ma√ß√£, um ovo ou ostras t√™m zinco suficiente.", supplement: "Zinco Bisglicinato" },
            { question: "Porque √© que tomar zinco nos primeiros sintomas de constipa√ß√£o funciona melhor?", options: ["Porque o frio sai do corpo mais depressa", "Porque o zinco muda a cor da l√≠ngua", "Porque o corpo ainda n√£o deixou o v√≠rus estabelecer-se completamente", "Porque ativa a tosse"], correct: 2, feedback: "Nos primeiros sintomas, o v√≠rus ainda est√° fraco e o corpo consegue 'venc√™-lo' com ajuda de zinco. Depois de 24h, o v√≠rus j√° se instalou e √© mais dif√≠cil. Por isso a rapidez √© crucial. Tomar no primeiro espirro pode fazer a diferen√ßa.", supplement: "Zinco" },
            { question: "Qual √© a melhor forma de garantir vitamina C todos os dias?", options: ["Comer fruta e legumes coloridos ao longo do dia", "Evitar toda a fruta", "Beber apenas refrigerantes com cor", "Tomar sempre o m√°ximo poss√≠vel"], correct: 0, feedback: "Uma laranja tem tanta vitamina C como muitos suplementos! Na fruta fresca absorve-se melhor, pois o corpo absorve-a com os outros nutrientes. Morango, kiwi e pimento vermelho s√£o campe√µes. No inverno, um suplemento pode ser um refor√ßo extra.", supplement: "Vitamina C" },
            { question: "O que caracteriza a imunidade inata (desde o nascimento)?", options: ["√â a parte das defesas que adquirimos ao longo da vida", "√â a parte das defesas com a qual j√° nascemos e que atua em minutos, muito depressa", "√â a que precisa sempre de vacina√ß√£o", "√â a que s√≥ funciona em crian√ßas"], correct: 1, feedback: "A imunidade inata √© como um 'guarda de seguran√ßa' que est√° sempre alerta. N√£o precisa de conhecer o inimigo para atacar e protege-nos na primeira exposi√ß√£o. Suplementos como vitamina D e pr√≥polis refor√ßam este 'guarda'.", supplement: "Vitamina D" },
            { question: "Se estiver com defici√™ncia de vitamina D, que sintoma corporal pode aparecer primeiro?", options: ["Cansa√ßo persistente e queda de cabelo", "Mudan√ßa de cor de olhos", "Alergia a chocolate", "Aumento de infe√ß√µes respirat√≥rias (constipa√ß√µes, gripe)"], correct: 3, feedback: "Vitamina D baixa = defesas fracas = mais constipa√ß√µes e gripes. √â t√£o comum que h√° 'epidemias' sazonais no inverno. Se fica doente 4 ou mais vezes por inverno, a vitamina D pode ser o culpado silencioso. Um simples teste sangu√≠neo confirma.", supplement: "Vitamina D" },
            { question: "A vitamina C funciona como uma 'neutraliza√ß√£o' de res√≠duos t√≥xicos quando o corpo combate uma infe√ß√£o. Verdadeiro ou falso?", options: ["Falso, vitamina C s√≥ colore a urina",  "Verdadeiro, ela protege as c√©lulas contra danos durante a luta contra v√≠rus", "Verdadeiro, mas s√≥ em suplemento", "Falso, s√≥ a √°gua quente faz isso"], correct: 1, feedback: "Quando o corpo combate uma infe√ß√£o, cria 'res√≠duos' perigosos que danificam as pr√≥prias c√©lulas. A Vitamina C limpa esses res√≠duos. Por isso tomar vitamina C durante uma constipa√ß√£o, realmente ajuda a recuperar mais r√°pido.", supplement: "Vitamina C" },
            { question: "Em que situa√ß√µes faz mais sentido pensar em suplementar zinco?", options: ["Quando a alimenta√ß√£o √© muito desequilibrada ou quando ficamos frequentemente doentes", "Sempre que se sente bem e sem qualquer queixa", "Apenas porque est√° na moda", "S√≥ para evitar completamente todas as doen√ßas"], correct: 0, feedback: "Se come pouca carne, frango ou marisco (as melhores fontes de zinco), e se fica doente cerca de 3 vezes por inverno, um suplemento simples de zinco pode transformar a sua vida. Muitas pessoas descobrem que as 'constipa√ß√µes constantes' desaparecem com zinco.", supplement: "Zinco" },
            { question: "Qual planta √© t√£o famosa em constipa√ß√µes que aparece em xaropes da farm√°cia desde h√° 100 anos?", options: ["Pr√≥polis", "Gengibre", "Sabugueiro", "Alca√ßuz"], correct: 2, feedback: "Sabugueiro √© a 'queridinha' das av√≥s para constipa√ß√µes. Estudos recentes confirmam: realmente funciona! Reduz dura√ß√£o em 3-4 dias. Quando combinado com zinco, o efeito √© ainda melhor. Est√° em muitos xaropes porque realmente vale a pena.", supplement: "Sabugueiro" },
            { question: "C√∫rcuma (aquela especiaria amarela que d√° cor ao arroz) √© famosa por...", options: ["Dar sabor apenas", "Ser cara e n√£o ter efeito no nosso organismo", "Ajudar a controlar a inflama√ß√£o", "Substituir completamente todos os medicamentos"], correct: 2, feedback: "C√∫rcuma √© usada na √çndia h√° 5000 anos porque realmente funciona. Quando o corpo exagera na rea√ß√£o (inflama√ß√£o), a c√∫rcuma ajuda a 'acalmar'. Ideal para pessoas que ficam doentes e depois sofrem com tosse prolongada ou corpo dorido.", supplement: "Curcumina + Piperina" },
            { question: "Para c√∫rcuma funcionar melhor no corpo, deve ser combinada com...", options: ["Gengibre", "Pimenta preta", "Mel", "Sal de cozinha"], correct: 1, feedback: "Pimenta preta (piperina) √© como adicionar um 'turbocompressor' √† c√∫rcuma. Sozinha, a c√∫rcuma absorve-se com dificuldade. Com a pimenta, a absor√ß√£o sobe drasticamente! Por isso os melhores suplementos combinam as duas.", supplement: "Curcumina + Piperina" },
            { question: "70% das defesas do corpo est√£o ligadas ao intestino. As bact√©rias 'amigas' do intestino ajudam porque...", options: ["Apenas aumentam o apetite", "Ensinam √†s defesas a distinguir entre 'amigos' e 'inimigos', prevenindo infe√ß√µes", "Ocupam o espa√ßo para v√≠rus n√£o poderem entrar", "Transformam comida em super-poder"], correct: 1, feedback: "Probi√≥ticos s√£o como 'treinadores' das defesas. Ensinam ao corpo qual √© o v√≠rus perigoso (combater) e qual √© a bact√©ria amiga (deixar em paz). Intestino desequilibrado = defesas confusas = mais doen√ßas. √â por isso que ap√≥s antibi√≥ticos, tomar probi√≥ticos faz toda a diferen√ßa.", supplement: "Probi√≥ticos" },
            { question: "Se tem problemas digestivos frequentes, porque √© que suplementar com probi√≥ticos tamb√©m pode refor√ßar as defesas?", options: ["Porque probi√≥ticos d√£o superpoderes", "Porque o intestino saud√°vel √© a base da imunidade. Sem ele, as defesas est√£o desorganizadas", "Porque mudam a cor das fezes", "Porque fazem perder peso automaticamente"], correct: 1, feedback: "Intestino com flora fraca = barreira fraca = patog√©nios entram facilmente = infe√ß√µes frequentes. Restaurar a flora do intestino √© restaurar o 'quartel-general' das defesas. Pessoas atentas e que tratam problemas digestivos frequentemente notam que ficam menos doentes.", supplement: "Probi√≥ticos" },
            { question: "Echinacea √© uma flor que durante s√©culos foi usada por povos ind√≠genas para constipa√ß√µes porque...", options: ["Tinha sabor agrad√°vel", "Estimula o corpo a reconhecer e atacar mais r√°pido os invasores", "Substitui todas as defesas", "Aumenta a temperatura do corpo"], correct: 1, feedback: "Echinacea 'acorda' o sistema imunit√°rio e deixa as defesas mais atentas e reativas. Se tomar logo nos primeiros sintomas, consegue muitas vezes parar a constipa√ß√£o antes dela come√ßar de verdade. √â uma das plantas mais estudadas e com efeito comprovado.", supplement: "Echinacea" },
            { question: "Se investe 3-6 meses em refor√ßar defesas (sono, alimenta√ß√£o, suplementos), qual √© o benef√≠cio concreto que pode esperar?", options: ["Nunca mais ficar doente", "Ficar doente 50-70% menos vezes e recuperar 3-5 dias mais depressa quando adoece", "N√£o precisar de m√©dicos", "Virar 'super-humano' sem qualquer doen√ßa"], correct: 1, feedback: "√â realista: em vez de 4-5 constipa√ß√µes/inverno, passa a ter 1-2. Quando adoece, em vez de ficar 10 dias mal, recupera em 4-5. Ao final do ano poupa tempo, dinheiro em medicamentos e qualidade de vida. Vale muito a pena investir agora.", supplement: "Higiene de Vida + Suplementa√ß√£o" },
            { question: "Vitamina A √© importante para as 'portas de entrada' do organismo (nariz, garganta, pele) porque...", options: ["Melhora apenas a vis√£o", "Mant√©m essas √°reas saud√°veis e imperme√°veis contra v√≠rus", "Apenas d√° c√¥r aos alimentos", "Aumenta o cheiro"], correct: 1, feedback: "Nariz e garganta s√£o sa 'portas de entrada' dos v√≠rus. Se estas portas est√£o fracas (ressecadas, inflamadas), o v√≠rus entra facilmente. A Vitamina A mant√©m esta porta 'blindada'. Cenoura, batata-doce e espinafre s√£o campe√µes de vitamina A.", supplement: "Vitamina A" },
            { question: "O fator mais subestimado que prejudica as defesas √©...", options: ["Sair em dias de frio", "Beber √°gua","Dormir menos de 6 horas por noite","Fazer exerc√≠cio"], correct: 2, feedback: "Sono √© quando o corpo 'reconstr√≥i' as defesas. Dormir menos de 6h/noite? As defesas caem drasticamente. √â por isso que durante stress, trabalho intenso e falta de sono, fica constantemente doente. Uma noite bem dormida vale mais que qualquer suplemento naquele dia.", supplement: "Higiene do Sono" },
            { question: "Pr√≥polis (resina que abelhas usam para proteger a colmeia) √© interessante porque...", options: ["Apenas ado√ßa bebidas",  "Pode ser usado para feridas", "Substitui todas as defesas do corpo", "Tem a√ß√£o antibacteriana natural e ajuda o corpo a atacar invasores",], correct: 3, feedback: "Se √© bom para proteger a colmeia de bact√©rias e fungos, porque n√£o seria bom para nos proteger? A ci√™ncia confirma: pr√≥polis realmente funciona. Combine com vitamina C e zinco e tem um 'escudo triplo' contra infe√ß√µes.", supplement: "Pr√≥polis" },
            { question: "Porque √© que conversar com um farmac√™utico, antes de comprar suplementos aleatoriamente, pode ajudar a economizar e rentabilizar o seu investimento?", options: ["Porque o farmac√™utico vende mais", "Porque analisa o seu hist√≥rico (medicamentos que toma, alergias, h√°bitos) e escolhe suplementos que realmente ajudam SUA situa√ß√£o espec√≠fica", "Porque todos os suplementos s√£o iguais", "Porque o farmac√™utico faz magia"], correct: 1, feedback: "Se toma medicamentos para tens√£o arterial, certos suplementos podem interferir. Se √© vegetariano, precisa de vitaminas diferentes de que quem come carne. Um farmac√™utico sabe isto. Tomar suplementos 'ao calhas' √© gastar dinheiro e ter 0% de resultado.", supplement: "Aconselhamento Farmac√™utico" },
            { question: "A combina√ß√£o 'perfeita' para defesas de inverno √©...", options: ["Tomar o m√°ximo de suplementos poss√≠vel", "7-9h sono + alimenta√ß√£o colorida + 30 min exerc√≠cio + suplementos direcionados (vitamina D, zinco, probi√≥ticos) + aconselhamento farmac√™utico", "Confiar apenas em medicamentos prescritos", "Ignorar defesas e confiar na sorte"], correct: 1, feedback: "Suplementos s√£o apenas 20% da equa√ß√£o. Os 80% s√£o: dormir bem, comer bem, mexer-se e ter paci√™ncia. Um suplemento sem estes h√°bitos √© in√∫til. Mas com estes h√°bitos, um bom suplemento torna-o imbat√≠vel. Combine tudo e passe pelo inverno tranquilamente.", supplement: "Estrat√©gia Integral de Sa√∫de" },
            { question: "Qual √© a melhor investimento em sa√∫de que pode fazer agora para proteger o seu futuro?", options: ["Esperar at√© ficar doente e depois gastar em medicamentos caros", "Confiar apenas na sorte e na gen√©tica", "Iniciar agora: dormir bem, comer de modo variado, suplementar estrategicamente e manter-se consistente", "Fazer tudo ao mesmo tempo de forma desorganizada"], correct: 2, feedback: "Defesas fortes n√£o v√™m de um suplemento isolado, v√™m de uma decis√£o de hoje. Come√ßar agora significa: 30 dias depois est√° diferente, 90 dias depois √© outra pessoa. Pessoas que investem em defesas preventivamente gastam 10x menos em medicamentos ao longo da vida. Vale cada minuto.", supplement: "Investimento em Sa√∫de" }
        ];

        let questions = [...defaultQuestions];
        let currentQuestion = 0;
        let score = 0;
        let answered = [];
        let enableDiscount = true;
        let discountCode = "LIGA_QUIZ_IMUNO";
        let discountPercent = 5;
        let isAdmin = false;

        function checkAdminAccess() {
            const urlParams = new URLSearchParams(window.location.search);
            const adminKey = urlParams.get('admin');
            if (adminKey === 'fligacol2023') {
                isAdmin = true;
                const editBtn = document.getElementById('editBtn');
                const discountBtn = document.getElementById('discountBtn');
                if (editBtn) editBtn.style.display = 'inline-block';
                if (discountBtn) discountBtn.style.display = 'inline-block';
            }
        }

        function initQuiz() {
            answered = new Array(questions.length).fill(null);
            currentQuestion = 0;
            score = 0;
            loadQuizSection();
        }

        function startQuiz() {
            document.getElementById('quizStartSection').classList.remove('active');
            document.getElementById('quizSection').classList.add('active');
            document.getElementById('resultsSection').classList.remove('active');
            initQuiz();
        }

        function loadQuizSection() {
    const quizSection = document.getElementById('quizSection');
    quizSection.innerHTML = '';  // ‚Üê Limpa tudo

    // Oculta TODOS os question-card existentes
    document.querySelectorAll('.question-card').forEach(card => {
        card.style.display = 'none';
    });

    questions.forEach((q, idx) => {
        const card = document.createElement('div');
        card.id = `card-${idx}`;  // ‚Üê Adiciona ID √∫nico
        card.className = 'question-card';
        // ... resto do c√≥digo igual
                card.innerHTML = `
                    <div class="question-number">Pergunta ${idx + 1} de 20</div>
                    <div class="question-text">${q.question}</div>
                    <div class="options">
                        ${q.options.map((opt, optIdx) => `
                            <div class="option" onclick="selectOption(${idx}, ${optIdx})" id="opt-${idx}-${optIdx}">
                                ${String.fromCharCode(65 + optIdx)}. ${opt}
                            </div>
                        `).join('')}
                    </div>
                    <div class="feedback" id="feedback-${idx}"></div>
                `;
                quizSection.appendChild(card);
            });

            const nav = document.createElement('div');
            nav.className = 'navigation';
            nav.innerHTML = `
                <button class="btn btn-secondary" onclick="previousQuestion()" id="prevBtn" style="display: none;">‚Üê Anterior</button>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 5%;"></div>
                </div>
                <button class="btn btn-primary" onclick="nextQuestion()" id="nextBtn">Pr√≥xima ‚Üí</button>
            `;
            quizSection.appendChild(nav);

            showQuestion(0);
        }

        function showQuestion(idx) {
    document.querySelectorAll('.question-card').forEach((card, i) => {
        card.style.display = i === idx ? 'block' : 'none';
    });

            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const progressFill = document.getElementById('progressFill');

            prevBtn.style.display = idx > 0 ? 'block' : 'none';
            nextBtn.textContent = idx === questions.length - 1 ? 'Terminar Quiz ‚úì' : 'Pr√≥xima ‚Üí';
            progressFill.style.width = ((idx + 1) / questions.length * 100) + '%';

            if (answered[idx] !== null) {
                const selected = answered[idx];
                document.getElementById(`opt-${idx}-${selected}`).classList.add('selected');
            }
        }

        function selectOption(qIdx, optIdx) {
            answered[qIdx] = optIdx;
            const question = questions[qIdx];
            const isCorrect = optIdx === question.correct;

            const option = document.getElementById(`opt-${qIdx}-${optIdx}`);
            option.classList.add('selected');

            const feedback = document.getElementById(`feedback-${qIdx}`);
            feedback.textContent = question.feedback;
            feedback.classList.add('show', isCorrect ? 'correct' : 'incorrect');

            if (isCorrect) {
                score++;
            }
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion(currentQuestion);
            } else {
                finishQuiz();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion(currentQuestion);
            }
        }

        function finishQuiz() {
            document.getElementById('quizSection').classList.remove('active');
            document.getElementById('resultsSection').classList.add('active');

            const scorePercentage = Math.round((score / questions.length) * 100);
            document.getElementById('scoreDisplay').textContent = `${score}/20`;

            let message = '';
            if (scorePercentage === 90) {
                message = "Excelente! Voc√™ √© um especialista em suplementa√ß√£o e imunidade! üåü";
            } else if (scorePercentage >= 70) {
                message = "Muito bom! Demonstra s√≥lidos conhecimentos sobre defesas e suplementos.";
            } else if (scorePercentage >= 60) {
                message = "Bom desempenho! Continue a aprender sobre nutri√ß√£o e imunidade.";
            } else {
                message = "Continue a estudar! H√° muito para descobrir sobre o sistema imunit√°rio.";
            }

            document.getElementById('resultMessage').textContent = message;

            const discountBadge = document.getElementById('discountBadge');
            if (enableDiscount && score === 20) {
                discountBadge.style.display = 'block';
                document.getElementById('discountCodeDisplay').textContent = discountCode;
                document.getElementById('discountPercentDisplay').textContent = discountPercent;
            } else {
                discountBadge.style.display = 'none';
            }
        }

        function restartQuiz() {
            document.getElementById('resultsSection').classList.remove('active');
            document.getElementById('quizSection').classList.remove('active');
            document.getElementById('quizStartSection').classList.add('active');
            score = 0;
            answered = [];
        }

        function toggleSettings() {
            const section = document.getElementById('settingsSection');
            section.style.display = section.style.display === 'none' ? 'block' : 'none';
        }

        function saveEdits() {
            alert('‚úì Altera√ß√µes guardadas!');
        }

        function toggleDiscountOption() {
            const section = document.getElementById('discountSection');
            section.style.display = section.style.display === 'none' ? 'block' : 'none';

            if (section.style.display === 'block') {
                document.getElementById('enableDiscount').checked = enableDiscount;
                document.getElementById('discountCode').value = discountCode;
            }
        }

        function saveDiscountSettings() {
            enableDiscount = document.getElementById('enableDiscount').checked;
            discountCode = document.getElementById('discountCode').value;
            discountPercent = parseInt(document.getElementById('discountPercent').value) || 5;
            alert('‚úì Configura√ß√µes de desconto guardadas!');
            toggleDiscountOption();
        }

        checkAdminAccess();
    </script>
</body>
</html>





